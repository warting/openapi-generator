/**
 *
 * Please note:
 * This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * Do not edit this file manually.
 *
 */

@file:Suppress(
    "ArrayInDataClass",
    "EnumEntryName",
    "RemoveRedundantQualifierName",
    "UnusedImport"
)

package org.openapitools.client.models

import org.openapitools.client.models.Pet
import org.openapitools.client.models.User

import kotlinx.serialization.Serializable
import kotlinx.serialization.SerialName
import kotlinx.serialization.Contextual
import kotlinx.serialization.KSerializer
import kotlinx.serialization.Serializer
import kotlinx.serialization.builtins.serializer
import kotlinx.serialization.encoding.Decoder
import kotlinx.serialization.encoding.Encoder
import kotlinx.serialization.SerializationException
import kotlinx.serialization.descriptors.SerialDescriptor
import kotlinx.serialization.descriptors.buildClassSerialDescriptor
import kotlinx.serialization.json.JsonDecoder
import kotlinx.serialization.json.JsonElement
import kotlinx.serialization.json.JsonEncoder
import kotlinx.serialization.json.JsonPrimitive
import kotlinx.serialization.json.JsonArray
import kotlinx.serialization.json.decodeFromJsonElement
import kotlinx.serialization.json.encodeToJsonElement

/**
 * 
 *
 */
@Serializable(with = UserOrPetOrArrayStringSerializer::class)
sealed interface UserOrPetOrArrayString {
    @JvmInline
    value class UserValue(val value: User) : UserOrPetOrArrayString

    @JvmInline
    value class PetValue(val value: Pet) : UserOrPetOrArrayString

    @JvmInline
    value class ListStringValue(val value: kotlin.collections.List<kotlin.String>) : UserOrPetOrArrayString

}

object UserOrPetOrArrayStringSerializer : KSerializer<UserOrPetOrArrayString> {
    override val descriptor: SerialDescriptor = buildClassSerialDescriptor("UserOrPetOrArrayString")

    override fun serialize(encoder: Encoder, value: UserOrPetOrArrayString) {
        val jsonEncoder = encoder as? JsonEncoder ?: throw SerializationException("UserOrPetOrArrayString can only be serialized with Json")

        when (value) {
            is UserOrPetOrArrayString.UserValue -> jsonEncoder.encodeSerializableValue(User.serializer(), value.value)
            is UserOrPetOrArrayString.PetValue -> jsonEncoder.encodeSerializableValue(Pet.serializer(), value.value)
            is UserOrPetOrArrayString.ListStringValue -> jsonEncoder.encodeJsonElement(jsonEncoder.json.encodeToJsonElement(value.value))
        }
    }

    override fun deserialize(decoder: Decoder): UserOrPetOrArrayString {
        val jsonDecoder = decoder as? JsonDecoder ?: throw SerializationException("UserOrPetOrArrayString can only be deserialized with Json")
        val jsonElement = jsonDecoder.decodeJsonElement()

        val errorMessages = mutableListOf<String>()

        if (jsonElement !is JsonPrimitive) {
            try {
                val instance = jsonDecoder.json.decodeFromJsonElement<User>(jsonElement)
                return UserOrPetOrArrayString.UserValue(instance)
            } catch (e: Exception) {
                errorMessages.add("Failed to deserialize as User: ${e.message}")
            }
        }
        if (jsonElement !is JsonPrimitive) {
            try {
                val instance = jsonDecoder.json.decodeFromJsonElement<Pet>(jsonElement)
                return UserOrPetOrArrayString.PetValue(instance)
            } catch (e: Exception) {
                errorMessages.add("Failed to deserialize as Pet: ${e.message}")
            }
        }
        if (jsonElement is JsonArray) {
            try {
                val instance = jsonDecoder.json.decodeFromJsonElement<kotlin.collections.List<kotlin.String>>(jsonElement)
                return UserOrPetOrArrayString.ListStringValue(instance)
            } catch (e: Exception) {
                errorMessages.add("Failed to deserialize as kotlin.collections.List<kotlin.String>: ${e.message}")
            }
        }

        throw SerializationException("Cannot deserialize UserOrPetOrArrayString. Tried: ${errorMessages.joinToString(", ")}")
    }
}

